version: 2

sources:
  - name: raw
    meta: 
      external_location: "/home/maker/data/{name}/*.csv"
    description: A clone of a Postgres application database.
    database: warehouse
    schema: main
    tables:
      - name: kraken
        description: Kraken trading pairs historical quote data
        columns:
          - name: pair
            description: Trading pair            
        tests:
          - dbt_utils.unique_combination_of_columns:
              combination_of_columns:
                - pair
                - client_timestamp

      - name: luno
        description: Luno trading pairs historical quote data
        columns:
          - name: pair
            description: Trading pair     
          - name: client_timestamp
            description: The timestamp reported by the ingest client machine at the time of ingest       
        tests:
          - dbt_utils.unique_combination_of_columns:
              combination_of_columns:
                - pair
                - client_timestamp

      - name:  xe
        description: xe.com reported exchange rates
        columns:
          - name: pair
            description: Trading pair            
          - name: client_timestamp
            description: The timestamp reported by the ingest client machine at the time of ingest       
        tests:
          - dbt_utils.unique_combination_of_columns:
              combination_of_columns:
                - pair
                - client_timestamp

      - name:  yahoo
        description: yahoo.com reported exchange rates
        columns:
          - name: pair
            description: Trading pair            
          - name: client_timestamp
            description: The timestamp reported by the ingest client machine at the time of ingest   

        tests:
          - dbt_utils.unique_combination_of_columns:
              combination_of_columns:
                - pair
                - client_timestamp